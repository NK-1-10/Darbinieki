

LOGIN

document.getElementById("loginForm").addEventListener("submit", function(e) {



    e.preventDefault();

    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();

    // Hardcoded admin
    const users = [{ username: "admin", password: "admin123", role: "admin" }];

    // Load workers
    const workers = JSON.parse(localStorage.getItem("workers")) || [];

    // Admin login
    const adminUser = users.find(u => u.username === username && u.password === password);
    if (adminUser) {
        window.location.href = "admin.html";
        return;
    }

    // Temporary password login
    const tempUser = workers.find(w => w.name === username && w.Temppassword === password);
    if (tempUser) {
        let newPassword = prompt("You are using a temporary password. Please set a new password:");
        while (!newPassword || !newPassword.trim()) {
            newPassword = prompt("Password cannot be empty! Enter a new password:");
        }

        // Save new password and remove temp
        tempUser.password = newPassword.trim();
        delete tempUser.Temppassword;
        localStorage.setItem("workers", JSON.stringify(workers));

        alert("Password updated! Logging in...");
        window.location.href = "worker.html";
        return;
    }

    // Normal worker login
    const realWorker = workers.find(w => w.name === username && w.password === password);
    if (realWorker) {
        window.location.href = "worker.html";
        return;
    }

    alert("Incorrect username or password!");
});



ADMIN

<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Worker Management</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 8px 12px; margin-bottom: 12px; }
        ul { list-style: none; padding: 0; max-width: 480px; }
        li { background:#f7f7f7; margin:6px 0; padding:8px 10px; border-radius:4px; border:1px solid #ddd; }
        .pw { color:#666; font-style:italic; margin-left:8px; }
    </style>
</head>
<body>
    <div>ADMIN</div>

    <h2>Worker Management</h2>
    <button id="addWorkerBtn">Add New Worker</button>

    <h3>Registered Workers</h3>
    <ul id="workerList"></ul>

    <script>
        const STORAGE_KEY = "workers";
        let workers = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
        const workerList = document.getElementById("workerList");
        const addBtn = document.getElementById("addWorkerBtn");

        function renderWorkers() {
            workerList.innerHTML = "";
            if (!workers.length) {
                workerList.innerHTML = "<li>No workers added yet.</li>";
                return;
            }

            workers.forEach((w, idx) => {
                const li = document.createElement("li");
                const passwordDisplay = w.Temppassword ? `(Temp Password: ${escapeHtml(w.Temppassword)})` : "";
                li.innerHTML = `<strong>${escapeHtml(w.name)}</strong>
                                <span class="pw">${passwordDisplay}</span>
                                <button data-index="${idx}" style="float:right;">Remove</button>`;
                workerList.appendChild(li);
            });

            workerList.querySelectorAll("button[data-index]").forEach(btn => {
                btn.addEventListener("click", () => {
                    const i = Number(btn.getAttribute("data-index"));
                    if (!Number.isNaN(i) && confirm(`Remove worker "${workers[i].name}"?`)) {
                        workers.splice(i, 1);
                        saveWorkers();
                        renderWorkers();
                    }
                });
            });
        }

        function saveWorkers() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(workers));
        }

        function addNewWorker() {
            const name = prompt("Enter worker's name:");
            if (!name || !name.trim()) { alert("Worker name is required!"); return; }
            const cleanName = name.trim();
            if (workers.some(w => w.name.toLowerCase() === cleanName.toLowerCase())) {
                alert("That worker already exists!"); return;
            }

            const Temppassword = prompt(`Enter a temporary password for ${cleanName}:`);
            if (!Temppassword || !Temppassword.trim()) { alert("Temporary password is required!"); return; }

            workers.push({ name: cleanName, Temppassword: Temppassword.trim() });
            saveWorkers();
            renderWorkers();
            alert(`Worker "${cleanName}" added successfully!`);
        }

        function escapeHtml(str) {
            return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");
        }

        addBtn.addEventListener("click", addNewWorker);
        renderWorkers();
    </script>
</body>
</html>

WORKER

<html>
<head>
    <title>Worker Schedule</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        table { border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #333; padding: 6px 12px; text-align: center; }
        form { margin-bottom: 20px; }
        select, input { margin: 4px; padding: 4px; }
    </style>
</head>
<body>
    <h2>WORKER SCHEDULE</h2>

    <form id="scheduleForm">
        <select id="month" required>
            <option value="">Select Month</option>
            <option>January</option><option>February</option><option>March</option>
            <option>April</option><option>May</option><option>June</option>
            <option>July</option><option>August</option><option>September</option>
            <option>October</option><option>November</option><option>December</option>
        </select>

        <select id="worker" required>
            <option value="">Select Worker</option>
        </select>

        <select id="date" required>
            <option value="">Select Date</option>
        </select>

        <select id="car" required>
            <option value="">Select Car</option>
            <option>Car A</option><option>Car B</option><option>Car C</option><option>Car D</option>
        </select>

        <input type="time" id="fromTime" required>
        <input type="time" id="toTime" required>
        <span id="hoursDisplay">Hours: 0.00</span>
        <button type="submit">Add Entry</button>
    </form>

    <div id="tableContainer"></div>

    <script>
        let schedule = [];
        const columns = ["Month","Worker","Date","Car","From","To","Hours"];
        const tableContainer = document.getElementById("tableContainer");
        const scheduleForm = document.getElementById("scheduleForm");
        const fromTimeInput = document.getElementById("fromTime");
        const toTimeInput = document.getElementById("toTime");
        const hoursDisplay = document.getElementById("hoursDisplay");
        const dateSelect = document.getElementById("date");
        const workerSelect = document.getElementById("worker");

        // Populate worker dropdown from localStorage
        const workers = JSON.parse(localStorage.getItem("workers")) || [];
        workers.forEach(w => {
            const option = document.createElement("option");
            option.value = w.name;
            option.textContent = w.name;
            workerSelect.appendChild(option);
        });

        // Populate dates 1-31
        for(let i=1;i<=31;i++){
            const option = document.createElement("option");
            option.value=i;
            option.textContent=i;
            dateSelect.appendChild(option);
        }

        function calculateHours(fromTime,toTime){
            if(!fromTime || !toTime) return 0;
            const [fromH, fromM] = fromTime.split(":").map(Number);
            const [toH, toM] = toTime.split(":").map(Number);
            let hours = (toH+toM/60)-(fromH+fromM/60);
            if(hours<0) hours+=24;
            return hours.toFixed(2);
        }

        function updateHours(){
            hoursDisplay.textContent = "Hours: "+calculateHours(fromTimeInput.value,toTimeInput.value);
        }

        fromTimeInput.addEventListener("input", updateHours);
        toTimeInput.addEventListener("input", updateHours);

        function renderTable(){
            let html = "<table><tr>";
            columns.forEach(c=>html+=`<th>${c}</th>`); html+="</tr>";
            schedule.forEach(entry=>{
                html+="<tr>";
                html+=`<td>${entry.month}</td><td>${entry.worker}</td><td>${entry.date}</td><td>${entry.car}</td><td>${entry.fromTime}</td><td>${entry.toTime}</td><td>${entry.hours}</td>`;
                html+="</tr>";
            });
            html+="</table>";
            tableContainer.innerHTML = html;
        }

        scheduleForm.addEventListener("submit",function(e){
            e.preventDefault();
            const month=document.getElementById("month").value;
            const worker=document.getElementById("worker").value;
            const date=document.getElementById("date").value;
            const car=document.getElementById("car").value;
            const fromTime=fromTimeInput.value;
            const toTime=toTimeInput.value;
            const hours=calculateHours(fromTime,toTime);
            schedule.push({month,worker,date,car,fromTime,toTime,hours});
            renderTable();
            scheduleForm.reset();
            hoursDisplay.textContent="Hours: 0.00";
        });
    </script>
</body>
</html>
